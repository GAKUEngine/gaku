/*
 *
 * Wijmo Library 2.0.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
(function(a){"use strict";var h="wijmo-wijsplitter-",w=h+"wrapper",p=h+"horizontal",q=h+"vertical",b=h+"h-",c=h+"v-",r="-content",l="panel1",m="panel2",e=l+r,n=m+r,y="bar",v="expander",u="ui-widget-header",f="ui-widget-content",t="ui-state-default",g="ui-state-hover",o="ui-state-active",d="ui-corner-",x="ui-icon",i="ui-icon-triangle-1-",j="collapsed",k="expanded",s="resize-helper";a.widget("wijmo.wijsplitter",{options:{sizing:null,sized:null,expand:null,collapse:null,expanded:null,collapsed:null,barZIndex:-1,showExpander:true,splitterDistance:100,orientation:"vertical",fullSplit:false,resizeSettings:{animationOptions:{duration:100,easing:"swing",disabled:false},ghost:false},panel1:{minSize:1,collapsed:false,scrollBars:"auto"},panel2:{minSize:1,collapsed:false,scrollBars:"auto"}},_setOption:function(c,d){var b=this,e=b.options,f=a.extend({},e[c]);if(c==="fullSplit")b._setFullSplit(d);else if(a.isPlainObject(e[c])){if(c==="panel1"&&d.collapsed!==undefined)b._setPanel1Collapsed(d.collapsed);else c==="panel2"&&d.collapsed!==undefined&&b._setPanel2Collapsed(d.collapsed);e[c]=a.extend(true,e[c],d);return}a.Widget.prototype._setOption.apply(b,arguments);if(f!==d)if(c==="orientation")b.refresh();else if(c==="fullSplit")b.refresh(true,false);else if(c==="splitterDistance"){b.refresh(false,false);b._trigger("sized")}c==="disabled"&&b._handleDisabledOption(d,b.element)},_create:function(){var a=this,b=a.element,c=a.options;a._fields={width:b.width(),height:b.height()};c.fullSplit&&a._setFullSplit(true);a._splitterify();a._updateElementsCss();a._updateElements();a._bindEvents();a._initResizer();c.disabled&&a.disable();a._trigger("load",null,a)},_handleDisabledOption:function(b,c){var a=this;if(b){if(!a.disabledDiv)a.disabledDiv=a._createDisabledDiv(c);a.disabledDiv.appendTo("body")}else if(a.disabledDiv){a.disabledDiv.remove();a.disabledDiv=null}},_createDisabledDiv:function(d){var g=this,b=d?d:g.element,c=b.offset(),f=b.outerWidth(),e=b.outerHeight();return a("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:f,height:e,left:c.left,top:c.top})},destroy:function(){var g=this,j=g.element,d=g._fields,t=d.wrapper,s=d.expander,u=d.bar,l=d.panel1,r=d.originalStyle,k=g.widgetName,h=d.oriPnl1Content,i=d.oriPnl2Content,m=d.oriPnl1ContentStyle,o=d.oriPnl2ContentStyle;l&&l.is(":ui-resizable")&&l.resizable("destroy");if(h){h.removeClass(c+e+" "+b+e+" "+f);if(m===undefined)h.removeAttr("style");else h.attr("style",m);h.appendTo(j)}if(i){i.removeClass(c+n+" "+b+n+" "+f);if(o===undefined)i.removeAttr("style");else i.attr("style",o);i.appendTo(j)}l.unbind("."+k);s.unbind("."+k);u.unbind("."+k);a(window).unbind("."+k);t.remove();j.removeClass(q+" "+p);if(r===undefined)j.removeAttr("style");else j.attr("style",r);if(g.disabledDiv){g.disabledDiv.remove();g.disabledDiv=null}g._fields=null},refresh:function(e,d){var a=this,c=a._fields,b=c.panel1;if(c._isResizing)return;(d||d===undefined)&&a._updateElementsCss();a._updateElements();if(e||e===undefined){b&&b.is(":ui-resizable")&&b.resizable("destroy");a._initResizer()}},_splitterify:function(){var k=this,f=k.element,m=k.options,b=k._fields,e,i,j,c,d,g,h,l;c=f.find(">div:eq(0)");d=f.find(">div:eq(1)");b.originalStyle=f.attr("style");e=a("<div></div>").appendTo(f);i=a("<div></div>").appendTo(e);if(c.length===0)c=a("<div></div>");else{b.oriPnl1Content=c;b.oriPnl1ContentStyle=c.attr("style")}c.appendTo(i);g=a("<div></div>").appendTo(e);m.barZIndex!==-1&&g.css("z-index",m.barZIndex);h=a("<div></div>").appendTo(g).attr("role","button");l=a("<span></span>").appendTo(h);j=a("<div></div>").appendTo(e);if(d.length===0)d=a("<div></div>");else{b.oriPnl2Content=d;b.oriPnl2ContentStyle=d.attr("style")}d.appendTo(j);b.wrapper=e;b.panel1=i;b.pnl1Content=c;b.panel2=j;b.pnl2Content=d;b.bar=g;b.expander=h;b.icon=l},_updateElementsCss:function(){var h=this,r=h.element,D=h.options,a=D.orientation==="vertical",g=h._fields,s=g.wrapper,A=g.panel1,B=g.panel2,j=g.pnl1Content,k=g.pnl2Content,C=g.bar,o=g.expander,z=g.icon;r.removeClass(q+" "+p).addClass(a?q:p);s.attr("class",w);A.removeClass(c+l+" "+b+l).addClass((a?c:b)+l);j.removeClass(c+e+" "+b+e+" "+f).addClass((a?c:b)+e+" "+f);C.attr("class",(a?c:b)+y+" "+u).css("width","").css("height","");o.attr("class",d+(a?"bl "+c:"tr "+b)+v+" "+t).css("left","").css("top","");z.attr("class",x+" "+i+(a?"w":"n"));B.removeClass(c+m+" "+b+m).addClass((a?c:b)+m);k.removeClass(c+e+" "+b+e+" "+f).addClass((a?c:b)+n+" "+f);h._updateExpanderCss()},_updateExpanderCss:function(){var r=this,s=r.options,q=r._fields,f=q.expander,g=q.icon,a=s.orientation==="vertical",e=a?c:b,h=a?"tr":"bl",l="br",o=a?"e":"s",m=a?"bl":"tr",n="tl",p=a?"w":"n";f.removeClass(e+k+" "+e+j+" "+d+h+" "+d+l+" "+d+m+" "+d+n);g.removeClass(i+o+" "+i+p);if(s.panel1.collapsed){f.addClass(d+h+" "+d+l+" "+e+j);g.addClass(i+o)}else{f.addClass(d+m+" "+d+n+" "+e+k);g.addClass(i+p)}},_updateElements:function(){var n=this,r=n.element,f=n.options,a=f.splitterDistance,h=n._fields,s=h.wrapper,l=h.panel1,p=h.pnl1Content,t=h.panel2,q=h.pnl2Content,o=h.bar,e=h.expander,g=r.width(),d=r.height(),m,i;s.height(d);n._setPanelsScrollMode();if(f.orientation==="vertical"){m=o.outerWidth(true);if(a>g-m)a=g-m;s.width(g*2);if(f.panel2.collapsed&&!f.panel1.collapsed)a=g-m;if(f.panel1.collapsed){e.addClass(c+j);l.css("display","none");a=0}else{e.addClass(c+k);l.css("display","")}l.height(d).width(a);p.outerHeight(d,true);o.outerHeight(d,true);t.height(d).width(g-a-m);q.outerHeight(d,true);e.css("cursor","pointer").css("top",d/2-e.outerHeight(true)/2)}else{i=o.outerHeight(true);if(a>d-i)a=d-i;if(f.panel2.collapsed&&!f.panel1.collapsed)a=d-i;p.outerHeight(a,true);if(f.panel1.collapsed){e.addClass(b+j);l.css("display","none");a=0}else{e.addClass(b+k);l.css("display","")}q.outerHeight(d-a-i,true);l.width(g).height(a);t.width(g).height(d-a-i);e.css("cursor","pointer").css("left",g/2-e.outerWidth(true)/2)}e.css("display",f.showExpander?"":"none")},_setFullSplit:function(b){var c=this,a=c._fields,e=b?"100%":a.width,d=b?"100%":a.height;c.element.css("width",e).css("height",d)},_setPanel1Collapsed:function(c,f){var b=this,d=b.options,e=d.panel1.collapsed;if(e===c)return;if(!b._trigger(e?"expand":"collapse",f,null))return;d.panel1.collapsed=c;if(c)d.panel2.collapsed=false;else a(".ui-resizable-handle",b.element).show();b._updateElements();b._updateExpanderCss();b._trigger(c?"collapsed":"expanded",f,null)},_setPanel2Collapsed:function(b){var c=this,d=c.options,f=d.panel2.collapsed,e=a(".ui-resizable-handle",c.element);if(f===b)return;d.panel2.collapsed=b;if(b){d.panel1.collapsed=false;e.hide()}else e.show();c._updateElements()},_bindEvents:function(){var c=this,b=c.options,h=c._fields,f=h.bar,e=h.expander,i=h.panel1,d=c.widgetName;e.bind("mouseover."+d,function(){if(b.disabled)return;e.addClass(g)}).bind("mouseout."+d,function(){if(b.disabled)return;e.removeClass(g).removeClass(o)}).bind("mousedown."+d,function(){if(b.disabled)return;e.addClass(o)}).bind("mouseup."+d,function(a){if(b.disabled)return;e.removeClass(o);if(b.panel2.collapsed){c._setPanel2Collapsed(!b.panel2.collapsed);return}c._setPanel1Collapsed(!b.panel1.collapsed,a)});f.bind("mouseover."+d,function(){if(b.disabled)return;f.addClass(g)}).bind("mouseout."+d,function(){if(b.disabled)return;f.removeClass(g)});i.bind("animating."+d,function(a){if(b.disabled)return;c._adjustLayout(c);c._trigger("sizing",a,null)}).bind("animated."+d,function(a){if(b.disabled)return;c._adjustLayout(c);c._trigger("sized",a,null)});a(".ui-resizable-handle",c.element).live("mouseover."+d,function(){if(b.disabled)return;f.addClass(g)}).live("mouseout."+d,function(){if(b.disabled)return;f.removeClass(g)});a(window).bind("resize."+d,function(){if(b.disabled)return;if(b.fullSplit){c._updateElements();c._initResizer()}})},_initResizer:function(){var l=this,h=l.element,d=l.options,e=l._fields,t=e.bar,n=e.panel1,k=d.resizeSettings,g=k.animationOptions,m=g.disabled?0:g.duration,v=h.width(),u=h.height(),p,r,j,o,q,i,f;if(d.orientation==="vertical"){p=t.outerWidth(true);r=v-p-d.panel2.minSize;j=d.panel1.minSize;if(j<2)j=2;n.resizable({wijanimate:true,minWidth:j,maxWidth:r,handles:"e",helper:c+s,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}else{o=t.outerHeight(true);q=u-o-d.panel2.minSize;i=d.panel1.minSize;if(i<2)i=2;n.resizable({wijanimate:true,minHeight:i,maxHeight:q,handles:"s",helper:b+s,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}f=a(".ui-resizable-handle",h);if(d.panel2.collapsed)f.hide();else f.show();if(a.browser.msie&&a.browser.version<7)d.orientation==="vertical"&&f.height(h.height())},_adjustLayout:function(a){var b=a.options,e=a._fields,d=e.panel1,c=b.orientation==="vertical"?d.width():d.height();if(b.splitterDistance===c)return;b.splitterDistance=c;a._updateElements()},_setPanelsScrollMode:function(){var d=this,c=d._fields,e=d.options,b=[e.panel1.scrollBars,e.panel2.scrollBars];a.each([c.pnl1Content,c.pnl2Content],function(c,a){if(b[c]==="auto")a.css("overflow","auto");else if(b[c]==="both")a.css("overflow","scroll");else if(b[c]==="none")a.css("overflow","hidden");else if(b[c]==="horizontal")a.css("overflow-x","scroll").css("overflow-y","hidden");else b[c]==="vertical"&&a.css("overflow-x","hidden").css("overflow-y","scroll")})}})})(jQuery);(function(a){"use strict";a.ui.plugin.add("resizable","wijanimate",{stop:function(l){var b=a(this).data("resizable"),i=b.options,c=b.element,d=b._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),j=h&&a.ui.hasScroll(d[0],"left")?0:b.sizeDiff.height,k=h?0:b.sizeDiff.width,g,e,f;c.css("width",b.originalSize.width).css("height",b.originalSize.height);g={width:b.size.width-k,height:b.size.height-j};e=parseInt(c.css("left"),10)+(b.position.left-b.originalPosition.left)||null;f=parseInt(c.css("top"),10)+(b.position.top-b.originalPosition.top)||null;c.animate(a.extend(g,f&&e?{top:f,left:e}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var e={width:parseInt(c.css("width"),10),height:parseInt(c.css("height"),10),top:parseInt(c.css("top"),10),left:parseInt(c.css("left"),10)};d&&d.length&&a(d[0]).css({width:e.width,height:e.height});b._updateCache(e);b._propagate("resize",l);c.trigger("animating")},complete:function(){c.trigger("animated")}})}})})(jQuery);